# Lucid Lang

[](https://github.com/your-username/lucid)
[](https://github.com/your-username/lucid/actions)
[](https://www.google.com/search?q=LICENSE)

> 一门追求极致**清晰**、**高效**和**安全**的现代化编程语言。

`Lucid` 是一个全新的编程语言项目，它旨在摆脱传统语言的历史包袱，吸收近二十年来的语言设计精华。我们的目标是创造一种语法极简、行为可预测、开发体验一流的语言，让编程回归其简单而强大的本质。

## 设计哲学 (Core Principles)

`Lucid` 的设计遵循以下核心原则，它们共同构成了这门语言的灵魂：

1.  **物理世界的守护者 (Guardian of the Physical World)**: 通过**内置的单位类型系统**，`Lucid` 可以在编译或运行时，从根本上杜绝因物理单位混淆（如米和秒相加）而导致的灾难性错误。

2.  **优雅的数据流大师 (Master of Elegant Data Flow)**: 以**管道操作符 (`|>`)** 为核心，深度融合`Result`错误处理类型。这使得处理复杂的、可能失败的操作链时，代码依然能保持从上到下的线性逻辑，清晰、健壮且极其优雅。

3.  **未来的并发先驱 (Pioneer of Future Concurrency)**: 通过**结构化并发** (`spawn`/`await`)，提供一种全新的、心智负担极低的并发模型。它旨在让编写安全、高效的并行代码，像写同步代码一样简单自然。

4.  **一切皆为表达式 (Everything is an Expression)**: `if/else`、代码块等所有结构都返回值，极大地增强了语言的组合能力和表达力。

5.  **安全与简洁 (Safety & Simplicity)**: 默认不可变性、无`null`值、显式错误处理和极简的语法，共同构建了一个既安全又易于使用的编程环境。

## 当前特性一览 (Feature Overview)

经过密集的开发，`Lucid v3.3` 版本已经拥有一个稳定、高效且功能丰富的核心，其主要特性包括：

- **完整的算术与逻辑运算**: 支持 `+`, `-`, `*`, `/`, `^` (幂运算)，以及 `==`, `!=`, `>`, `<`, `>=`, `<=` 等全套比较运算符，并能正确处理优先级。
- **函数作为一等公民**: 支持高阶函数、词法作用域和强大的**闭包**特性。
- **灵活的条件表达式**: `if/else` 既可以作为简单表达式，也可以使用 `{...}` 代码块。
- **内置单位类型系统**: 支持 `m`, `s`, `kg` 等物理单位的定义，并能进行安全的复合单位运算（如 `km/hr`, `m^2`）。
- **`Result` 错误处理机制**: 通过内置的 `Ok(value)` 和 `Err(error)` 类型，提供健壮的错误处理。
- **智能管道操作符**: `|>` 能够识别 `Result` 类型并自动进行“短路”处理。
- **结构化并发骨架**: 已实现 `spawn` 和 `await` 关键字的完整语法和（串行的）执行模型，为未来的并行化打下了坚实基础。

## 路线图 (Roadmap)

我们的宏伟蓝图正在一步步变为现实。

- [x] **v1.0 - v3.3 (核心引擎与创新特性)**

  - [x] 稳定的递归下降解析器与解释器引擎
  - [x] 函数、闭包、词法作用域
  - [x] 内置单位类型系统 (支持复合单位与幂运算)
  - [x] `Result` 类型与智能管道错误处理
  - [x] 结构化并发的语法与串行执行模型

- [ ] **v4.0 (未来规划): 性能与生态**

  - [ ] **真正的并行执行**: 将 `spawn`/`await` 的后端从串行模拟升级为真正的多线程/异步执行。
  - [ ] **基础标准库**: 增加更多内置函数，特别是针对字符串、集合（列表/字典）的操作。
  - [ ] **模块系统**: 支持将代码拆分到多个文件并相互导入。
  - [ ] **性能优化**: 从树遍历解释器向更高性能的执行模型（如字节码虚拟机 VM）探索。

## 目录结构 (Directory Structure)

为了保证项目的清晰、可维护和可扩展性，我们采用以下专业目录结构。

```
lucid-lang/
├── .gitignore
├── LICENSE
├── README.md
├── run_tests.py        # 官方自动化测试套件
│
└── src/
    └── lucid/
        ├── __init__.py
        ├── __main__.py
        ├── ast.py
        ├── core_types.py
        ├── interpreter.py
        ├── lexer.py
        └── parser.py
```

## 如何开始 (Getting Started)

1.  **克隆仓库**: `git clone https://github.com/your-username/lucid-lang.git`

2.  **进入目录**: `cd lucid-lang`

3.  **运行自动化测试 (推荐)**:

    ```bash
    python run_tests.py
    ```

    （确保所有测试都通过，证明你的环境是健康的）

4.  **启动 REPL (交互式环境)**:

    ```bash
    python -m src.lucid
    ```

## 贡献指南 (Contributing)

我们欢迎任何形式的贡献！无论是代码实现、文档编写、还是提出新的想法。请遵循标准的 Fork & Pull Request 流程。所有讨论都应围绕我们的核心设计哲学展开。
